<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DrunkFrog</title>
  <link href="style.css" rel="stylesheet" type="text/css" media="all">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="manifest" href="favicon/site.webmanifest">
</head>
<style>
  .window {
    padding: 10px;
  }
</style>
<body onload="showExternalContent('post/game_design.html')">
  <img src="logo.png" alt="Shelton Logo" class="logo" onclick="window.location.href='index.html'">
  <div class="window-body">
    <menu role="tablist">
      <li onclick="showExternalContent('post/game_design.html')" role="tab" aria-selected="true"><a href="#tabs">Home Page</a></li>
      <li onclick="showExternalContent('post/game_design.html')" role="tab" aria-selected="false"><a href="#tabs">Game Design</a></li>
      <li onclick="showExternalContent('post/about_me.html')" role="tab" aria-selected="false"><a href="#tabs">About Me</a></li>
    </menu>
    <div class="window" role="tabpanel">
      <div class="window-body"></div>
    </div>
  </div>

  <button class="back-to-top" onclick="scrollToTop()">â–²</button>
  <div class="crt monitor"></div>
  
  <script>
    function showExternalContent(url) {
      console.log('showExternalContent called with url:', url);
      fetch(url)
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
          }
          return response.text();
        })
        .then(data => displayContent(data))
        .catch(error => {
          console.error('Error loading external content:', error);
          displayError(error);
        });
    }

    function displayContent(html) {
      const content = document.querySelector('.window');
      content.classList.remove('active');
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, "text/html");

      const externalTitle = doc.querySelector('title')?.innerText || "Default Title";
      const currentTitle = document.title.split(' - ')[0];
      document.title = `${currentTitle} - ${externalTitle}`;

      const titleElement = document.createElement('h3');
      titleElement.textContent = externalTitle;

      const bodyContent = doc.querySelector('body').innerHTML;
      content.innerHTML = '';

      const fragment = document.createDocumentFragment();
      fragment.appendChild(titleElement);

      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = bodyContent;

      while (tempDiv.firstChild) {
        fragment.appendChild(tempDiv.firstChild);
      }

      content.appendChild(fragment);
      setTimeout(() => content.classList.add('active'), 10);
    }

    function displayError(error) {
      const content = document.querySelector('.window');
      content.innerHTML = `<p>Error loading content: ${error.message}</p>`;
      content.classList.add('active');
    }

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function handleScroll() {
      const button = document.querySelector('.back-to-top');
      button.style.display = window.scrollY > 300 ? 'block' : 'none';
    }

    document.addEventListener('DOMContentLoaded', function() {
      const tabs = document.querySelectorAll('[role="tab"]');

      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
          this.setAttribute('aria-selected', 'true');
        });
      });

      window.addEventListener('scroll', handleScroll);
      handleScroll();

      fetch('/ui/footer.html')
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
          }
          return response.text();
        })
        .then(data => {
          document.querySelector('.dynamic-footer').innerHTML = data;
        })
        .catch(error => {
          console.error('Error loading footer:', error);
        });
    });
  </script>
</body>
<div class="dynamic-footer"></div>
</html>
